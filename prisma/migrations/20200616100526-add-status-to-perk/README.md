# Migration `20200616100526-add-status-to-perk`

This migration has been generated by Kervin at 6/16/2020, 10:05:26 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "PerkStatus" AS ENUM ('ACTIVE', 'INACTIVE', 'PENDING');

ALTER TABLE "myexactjobs-prisma-prod$prod"."Application" ALTER COLUMN "status" SET DEFAULT E'NEW';

ALTER TABLE "myexactjobs-prisma-prod$prod"."ApplicationNote" ALTER COLUMN "type" SET DEFAULT E'NOTE';

ALTER TABLE "myexactjobs-prisma-prod$prod"."Job" ALTER COLUMN "status" SET DEFAULT E'DRAFT';

ALTER TABLE "myexactjobs-prisma-prod$prod"."Perk" ADD COLUMN "status" "PerkStatus" NOT NULL DEFAULT E'PENDING';

ALTER TABLE "myexactjobs-prisma-prod$prod"."User" ALTER COLUMN "status" SET DEFAULT E'ACTIVE';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200615124036-make-perk-name-unique..20200616100526-add-status-to-perk
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 enum UserStatus {
   ACTIVE
@@ -35,8 +35,14 @@
   EXPIRED
   PENDING
 }
+enum PerkStatus {
+  ACTIVE
+  INACTIVE
+  PENDING
+}
+
 model Application {
   id String @id @default(cuid())
   createdAt DateTime @default(now())
@@ -250,8 +256,9 @@
   jobs         Job[]         @relation(references: [id])
   authorId     String        @map("author")
   author       User          @relation(fields: [authorId], references: [id])
   JobTemplates JobTemplate[] @relation(references: [id])
+  status       PerkStatus    @default(PENDING)
 }
 model JobTemplate {
   id               String   @id @default(cuid())
```


