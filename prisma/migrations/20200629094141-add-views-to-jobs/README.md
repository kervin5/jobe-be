# Migration `20200629094141-add-views-to-jobs`

This migration has been generated by Kervin Vasquez at 6/29/2020, 9:41:41 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "myexactjobs-prisma-prod$prod"."Application" ALTER COLUMN "status" SET DEFAULT E'NEW';

ALTER TABLE "myexactjobs-prisma-prod$prod"."ApplicationNote" ALTER COLUMN "type" SET DEFAULT E'NOTE';

ALTER TABLE "myexactjobs-prisma-prod$prod"."Job" ADD COLUMN "views" integer  NOT NULL DEFAULT 0,
ALTER COLUMN "status" SET DEFAULT E'DRAFT';

ALTER TABLE "myexactjobs-prisma-prod$prod"."Perk" ALTER COLUMN "status" SET DEFAULT E'PENDING';

ALTER TABLE "myexactjobs-prisma-prod$prod"."User" ALTER COLUMN "status" SET DEFAULT E'ACTIVE';
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200619101834-expose-perk-create-and-update..20200629094141-add-views-to-jobs
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 enum UserStatus {
   ACTIVE
@@ -160,8 +160,9 @@
   cronTaskId String?      @map("cronTask")
   cronTask   JobCronTask? @relation(fields: [cronTaskId], references: [id])
   perks Perk[] @relation(references: [id])
+  views Int    @default(0)
 }
 model JobCronTask {
   id       String   @id @default(cuid())
```


